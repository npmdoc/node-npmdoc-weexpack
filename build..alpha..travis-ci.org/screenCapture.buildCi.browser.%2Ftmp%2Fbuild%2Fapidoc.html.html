<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a>weexpack (v0.4.0)</a>
</h1>
<h4>Weex pack tool</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.weexpack">module weexpack</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.CordovaExternalToolErrorContext">
            function <span class="apidocSignatureSpan">weexpack.</span>CordovaExternalToolErrorContext
            <span class="apidocSignatureSpan">(cmd, args, cwd)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.getVersion">
            function <span class="apidocSignatureSpan">weexpack.</span>getVersion
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.init">
            function <span class="apidocSignatureSpan">weexpack.</span>init
            <span class="apidocSignatureSpan">(projectName = '', configFile = '')</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.run">
            function <span class="apidocSignatureSpan">weexpack.</span>run
            <span class="apidocSignatureSpan">(platform = '', options = {})</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.runAndroid">
            function <span class="apidocSignatureSpan">weexpack.</span>runAndroid
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.runIOS">
            function <span class="apidocSignatureSpan">weexpack.</span>runIOS
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.runWeb">
            function <span class="apidocSignatureSpan">weexpack.</span>runWeb
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">weexpack.</span>CordovaExternalToolErrorContext.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">weexpack.</span>config</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">weexpack.</span>gitclone</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">weexpack.</span>gradle</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">weexpack.</span>market</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">weexpack.</span>npm</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">weexpack.</span>podfile</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">weexpack.</span>project</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">weexpack.</span>telemetry</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">weexpack.</span>validator</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.weexpack.CordovaExternalToolErrorContext">module weexpack.CordovaExternalToolErrorContext</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.CordovaExternalToolErrorContext.CordovaExternalToolErrorContext">
            function <span class="apidocSignatureSpan">weexpack.</span>CordovaExternalToolErrorContext
            <span class="apidocSignatureSpan">(cmd, args, cwd)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.weexpack.CordovaExternalToolErrorContext.prototype">module weexpack.CordovaExternalToolErrorContext.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.CordovaExternalToolErrorContext.prototype.toString">
            function <span class="apidocSignatureSpan">weexpack.CordovaExternalToolErrorContext.prototype.</span>toString
            <span class="apidocSignatureSpan">(isVerbose)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.weexpack.config">module weexpack.config</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.config.Config">
            function <span class="apidocSignatureSpan">weexpack.config.</span>Config
            <span class="apidocSignatureSpan">(properties, path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.config.ConfigResolver">
            function <span class="apidocSignatureSpan">weexpack.config.</span>ConfigResolver
            <span class="apidocSignatureSpan">(def)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">weexpack.config.</span>androidConfigResolver</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">weexpack.config.</span>iOSConfigResolver</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.weexpack.gitclone">module weexpack.gitclone</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.gitclone.clone">
            function <span class="apidocSignatureSpan">weexpack.gitclone.</span>clone
            <span class="apidocSignatureSpan">(git_url, git_ref, clone_dir)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.weexpack.gradle">module weexpack.gradle</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.gradle.applyPatch">
            function <span class="apidocSignatureSpan">weexpack.gradle.</span>applyPatch
            <span class="apidocSignatureSpan">(file, patch, isProject)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.gradle.makeBuildPatch">
            function <span class="apidocSignatureSpan">weexpack.gradle.</span>makeBuildPatch
            <span class="apidocSignatureSpan">(name, version, groupId, isProject)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.gradle.makeSettingsPatch">
            function <span class="apidocSignatureSpan">weexpack.gradle.</span>makeSettingsPatch
            <span class="apidocSignatureSpan">(name, projectDir)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.gradle.revokePatch">
            function <span class="apidocSignatureSpan">weexpack.gradle.</span>revokePatch
            <span class="apidocSignatureSpan">(file, patch)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.weexpack.market">module weexpack.market</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.market.apply">
            function <span class="apidocSignatureSpan">weexpack.market.</span>apply
            <span class="apidocSignatureSpan">(name, p)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.market.info">
            function <span class="apidocSignatureSpan">weexpack.market.</span>info
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.market.publish">
            function <span class="apidocSignatureSpan">weexpack.market.</span>publish
            <span class="apidocSignatureSpan">(name, namespace, fullname, ali, version, extend)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">weexpack.market.</span>domain</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.weexpack.npm">module weexpack.npm</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.npm.fetchCache">
            function <span class="apidocSignatureSpan">weexpack.npm.</span>fetchCache
            <span class="apidocSignatureSpan">(npmName, version, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.npm.getLastestVersion">
            function <span class="apidocSignatureSpan">weexpack.npm.</span>getLastestVersion
            <span class="apidocSignatureSpan">(name, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.npm.publish">
            function <span class="apidocSignatureSpan">weexpack.npm.</span>publish
            <span class="apidocSignatureSpan">(tnpm, verbose, dir)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.npm.unpackTgz">
            function <span class="apidocSignatureSpan">weexpack.npm.</span>unpackTgz
            <span class="apidocSignatureSpan">(package_tgz, unpackTarget, callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">weexpack.npm.</span>prefix</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.weexpack.podfile">module weexpack.podfile</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.podfile.applyPatch">
            function <span class="apidocSignatureSpan">weexpack.podfile.</span>applyPatch
            <span class="apidocSignatureSpan">(file, patch)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.podfile.makeBuildPatch">
            function <span class="apidocSignatureSpan">weexpack.podfile.</span>makeBuildPatch
            <span class="apidocSignatureSpan">(name, version)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.podfile.revokePatch">
            function <span class="apidocSignatureSpan">weexpack.podfile.</span>revokePatch
            <span class="apidocSignatureSpan">(file, patch)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.weexpack.project">module weexpack.project</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.project.createProject">
            function <span class="apidocSignatureSpan">weexpack.project.</span>createProject
            <span class="apidocSignatureSpan">(projectRoot, platform, opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.weexpack.telemetry">module weexpack.telemetry</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.telemetry.clear">
            function <span class="apidocSignatureSpan">weexpack.telemetry.</span>clear
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.telemetry.hasUserOptedInOrOut">
            function <span class="apidocSignatureSpan">weexpack.telemetry.</span>hasUserOptedInOrOut
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.telemetry.isCI">
            function <span class="apidocSignatureSpan">weexpack.telemetry.</span>isCI
            <span class="apidocSignatureSpan">(env)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.telemetry.isNoTelemetryFlag">
            function <span class="apidocSignatureSpan">weexpack.telemetry.</span>isNoTelemetryFlag
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.telemetry.isOptedIn">
            function <span class="apidocSignatureSpan">weexpack.telemetry.</span>isOptedIn
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.telemetry.showPrompt">
            function <span class="apidocSignatureSpan">weexpack.telemetry.</span>showPrompt
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.telemetry.track">
            function <span class="apidocSignatureSpan">weexpack.telemetry.</span>track
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.telemetry.turnOff">
            function <span class="apidocSignatureSpan">weexpack.telemetry.</span>turnOff
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.telemetry.turnOn">
            function <span class="apidocSignatureSpan">weexpack.telemetry.</span>turnOn
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.weexpack.validator">module weexpack.validator</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.validator.checkAndroid">
            function <span class="apidocSignatureSpan">weexpack.validator.</span>checkAndroid
            <span class="apidocSignatureSpan">(cwd)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.validator.checkIOS">
            function <span class="apidocSignatureSpan">weexpack.validator.</span>checkIOS
            <span class="apidocSignatureSpan">(cwd)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.validator.isOnLinux">
            function <span class="apidocSignatureSpan">weexpack.validator.</span>isOnLinux
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.validator.isOnMac">
            function <span class="apidocSignatureSpan">weexpack.validator.</span>isOnMac
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.validator.isOnWindows">
            function <span class="apidocSignatureSpan">weexpack.validator.</span>isOnWindows
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.weexpack.validator.isValidPackageName">
            function <span class="apidocSignatureSpan">weexpack.validator.</span>isValidPackageName
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.weexpack" id="apidoc.module.weexpack">module weexpack</a></h1>


    <h2>
        <a href="#apidoc.element.weexpack.CordovaExternalToolErrorContext" id="apidoc.element.weexpack.CordovaExternalToolErrorContext">
        function <span class="apidocSignatureSpan">weexpack.</span>CordovaExternalToolErrorContext
        <span class="apidocSignatureSpan">(cmd, args, cwd)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CordovaExternalToolErrorContext(cmd, args, cwd) {
    this.cmd = cmd;
    // Helper field for readability
    this.cmdShortName = path.basename(cmd);
    this.args = args;
    this.cwd = cwd;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.getVersion" id="apidoc.element.weexpack.getVersion">
        function <span class="apidocSignatureSpan">weexpack.</span>getVersion
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getVersion() {
  return require('./package.json').version
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.init" id="apidoc.element.weexpack.init">
        function <span class="apidocSignatureSpan">weexpack.</span>init
        <span class="apidocSignatureSpan">(projectName = '', configFile = '')</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function init(projectName = '', configFile = '') {
  if (projectName.match(/^[$A-Z_][0-9A-Z_-]*$/i)) {
    initProject(projectName, configFile)
  } else {
    console.log(`  ${chalk.red('Invalid project name:')} ${chalk.yellow(projectName)}`)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
const Market = require('./market');
const Cache = require('../utils/cache');
const Path = require('path');
module.exports = function (ali) {

var dir = process.cwd();
var xmlFilePath = Path.join(dir, 'plugin.xml');
Cache.<span class="apidocCodeKeywordSpan">init</span>();
if (!Fs.existsSync(xmlFilePath)) {
  //æ–°ç‰ˆæœ¬
  var pkg = require(Path.join(dir,"./package.json"))
  pkg.weexpack = "0.4.0"
  if (ali) {
    pkg.publishConfig = {
      registry: 'http://registry.npm.alibaba-inc.com'
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.run" id="apidoc.element.weexpack.run">
        function <span class="apidocSignatureSpan">weexpack.</span>run
        <span class="apidocSignatureSpan">(platform = '', options = {})</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function run(platform = '', options = {}) {
  switch (platform) {
    case 'android' : runAndroid(options); break;
    case 'ios'     : runIOS(options);     break;
    case 'web'     : runWeb(options);     break;

    default : {
      console.log(`  ${chalk.red('Unknown platform:')} ${chalk.yellow(platform)}`)
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    args,
    options: {
      projectName,
    }
  })

  generator.destinationRoot(projectName)
  generator.<span class="apidocCodeKeywordSpan">run</span>()
}

module.exports = init
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.runAndroid" id="apidoc.element.weexpack.runAndroid">
        function <span class="apidocSignatureSpan">weexpack.</span>runAndroid
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function runAndroid(options) {
  console.log(` =&gt; ${chalk.blue.bold('npm install&amp;build')}`)
  utils.buildJS()
    .then(()=&gt; {
      return new Promise((resolve, reject)=&gt; {
        copy('./dist/', 'platforms/android/app/src/main/assets/dist', {overwrite: true}, function (err) {
          if (err) return reject(err);
          else resolve();
        })
      });
    })
    .then(()=&gt; {
      startJSServer()
      return {options}
    })
    .then(prepareAndroid)
    .then(resolveConfig)
    .then(findAndroidDevice)
    .then(chooseDevice)
    .then(reverseDevice)

    .then(buildApp)
    .then(installApp)
    .then(runApp)
    .catch((err) =&gt; {
      if (err) {
        console.log(chalk.red('Error:', err));
      }
    })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.runIOS" id="apidoc.element.weexpack.runIOS">
        function <span class="apidocSignatureSpan">weexpack.</span>runIOS
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function runIOS(options) {
  utils.checkAndInstallForIosDeploy()
    .then(utils.buildJS)
    .then(()=&gt;{
      return utils.exec('rsync  -r -q ./dist/* platforms/ios/bundlejs/')
    })
    .then(()=&gt; {
      startJSServer()
      return {options}
    }).then(prepareIOS)
     .then(installDep)
    .then(findIOSDevice)
    .then(chooseDevice)
    .then(buildApp)
    .then(runApp)
    .catch((err) =&gt; {
      if (err) {
        try {
          if(err.stderr){
            console.log(err.stderr)
          }
          else{
            console.log(err);
          }
          if(err.output)console.log(err.output.join('\n'))
        }catch(e){
          console.log(e);
        }
      }
    })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.runWeb" id="apidoc.element.weexpack.runWeb">
        function <span class="apidocSignatureSpan">weexpack.</span>runWeb
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function runWeb(options) {
  if (!checkWebEnv(process.cwd())) {
    console.log()
    console.log(chalk.red('  Not available web environment !'))
    console.log()
    console.log(`  You should run ${chalk.blue('weexpack init')} first`)
    return
  }

  console.log()
  console.log(` =&gt; ${chalk.blue.bold('Starting web service')}`)

  util.buildJS().then(function () {
    let exist = startJSServer();
    //æ²¡åŠžæ³•æ—&nbsp;æ³•é¢„çŸ¥æœåŠ¡å™¨å•¥æ—¶å€™å®Œæˆ
    setTimeout(function () {
      preview()
    }, exist ? 0 : 2000)

  })

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.weexpack.CordovaExternalToolErrorContext" id="apidoc.module.weexpack.CordovaExternalToolErrorContext">module weexpack.CordovaExternalToolErrorContext</a></h1>


    <h2>
        <a href="#apidoc.element.weexpack.CordovaExternalToolErrorContext.CordovaExternalToolErrorContext" id="apidoc.element.weexpack.CordovaExternalToolErrorContext.CordovaExternalToolErrorContext">
        function <span class="apidocSignatureSpan">weexpack.</span>CordovaExternalToolErrorContext
        <span class="apidocSignatureSpan">(cmd, args, cwd)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CordovaExternalToolErrorContext(cmd, args, cwd) {
    this.cmd = cmd;
    // Helper field for readability
    this.cmdShortName = path.basename(cmd);
    this.args = args;
    this.cwd = cwd;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.weexpack.CordovaExternalToolErrorContext.prototype" id="apidoc.module.weexpack.CordovaExternalToolErrorContext.prototype">module weexpack.CordovaExternalToolErrorContext.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.weexpack.CordovaExternalToolErrorContext.prototype.toString" id="apidoc.element.weexpack.CordovaExternalToolErrorContext.prototype.toString">
        function <span class="apidocSignatureSpan">weexpack.CordovaExternalToolErrorContext.prototype.</span>toString
        <span class="apidocSignatureSpan">(isVerbose)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function (isVerbose) {
    if(isVerbose) {
        return 'External tool \'' + this.cmdShortName + '\'' +
            '\nCommand full path: ' + this.cmd + '\nCommand args: ' + this.args +
            (typeof this.cwd !== 'undefined' ? '\nCommand cwd: ' + this.cwd : '');
    }

    return this.cmdShortName;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
           return f;
        }
        return null;
    }).filter(function (f) {
        return f !== null;
    });
    if(file &amp;&amp; file[0] ) {
      raw = fs.readFileSync(file[0]).<span class="apidocCodeKeywordSpan">toString</span>('utf8').replace(/cordova-cli/
g, cordova_lib.binname);
      cordova.emit('results', raw);
    }

    return Q();
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.weexpack.config" id="apidoc.module.weexpack.config">module weexpack.config</a></h1>


    <h2>
        <a href="#apidoc.element.weexpack.config.Config" id="apidoc.element.weexpack.config.Config">
        function <span class="apidocSignatureSpan">weexpack.config.</span>Config
        <span class="apidocSignatureSpan">(properties, path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class Config {
  constructor(properties, path) {
    this.path = path;
    if (properties instanceof ConfigResolver) {
      let map = {};
      this.properties = [];
      for (let key in properties.def) {
        for (let propName in properties.def[key]) {
          if (!map[propName]) {
            this.properties.push({
              name: propName,
              desc: properties.def[key].desc || 'enter your ' + propName + ':'
            });
            map[propName] = true;
          }
        }
      }
    }
    else {
      this.properties = properties.split(',').map(prop=&gt; {
        var splits = prop.split('|');
        return {
          name: splits[0],
          desc: splits[1] || 'enter your ' + splits[0] + ':'
        }
      });
    }
  }

  getConfig() {
    return new Promise((resolve, reject)=&gt; {
      let config = {};
      try {
        config = require(this.path);
      }
      catch (e) {
      }
      var questions = [], answers = {};
      console.log('============build config============')
      this.properties.forEach(function (prop) {
        if (config[prop.name] !== undefined &amp;&amp; config[prop.name] != '') {
          answers[prop.name] = config[prop.name];
          console.log(prop.name + '=&gt;' + answers[prop.name]);
        }
        else {
          questions.push({
            type: 'input',
            message: prop.desc,
            name: prop.name
          })
        }
      });
      if (questions.length &gt; 0) {
        Inquirer.prompt(questions)
          .then((answers) =&gt; {
            Object.assign(config, answers);
            Fs.writeFileSync(this.path, JSON.stringify(config, null, 4))
            resolve(config);
          })
      }
      else {
        console.log('if you want to change build config.please modify ' + Path.basename(this.path));
        resolve(config)
      }
    })

  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.config.ConfigResolver" id="apidoc.element.weexpack.config.ConfigResolver">
        function <span class="apidocSignatureSpan">weexpack.config.</span>ConfigResolver
        <span class="apidocSignatureSpan">(def)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class ConfigResolver {
  constructor(def) {
    this.def = def;
  }

  resolve(config, basePath) {
    basePath = basePath || process.cwd();
    for (let path in this.def) {
      if (this.def.hasOwnProperty(path)) {
        let targetPath = Path.join(basePath, path);
        let source = Fs.readFileSync(targetPath).toString();
        for (let key in this.def[path]) {
          if (this.def[path].hasOwnProperty(key)) {
            let configDef = this.def[path][key];
            if (Array.isArray(configDef)) {
              configDef.forEach((def)=&gt; {
                source = _resolveConfigDef(source, def, config, key)
              })
            }
            else {
              source = _resolveConfigDef(source, configDef, config, key);
            }
          }
        }
        Fs.writeFileSync(targetPath, source);
      }

    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.weexpack.gitclone" id="apidoc.module.weexpack.gitclone">module weexpack.gitclone</a></h1>


    <h2>
        <a href="#apidoc.element.weexpack.gitclone.clone" id="apidoc.element.weexpack.gitclone.clone">
        function <span class="apidocSignatureSpan">weexpack.gitclone.</span>clone
        <span class="apidocSignatureSpan">(git_url, git_ref, clone_dir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clone(git_url, git_ref, clone_dir){

    var needsGitCheckout = !!git_ref;
    if (!shell.which('git')) {
        return Q.reject(new Error('"git" command line tool is not installed: make sure it is accessible on your PATH.'));
    }

    // If no clone_dir is specified, create a tmp dir which git will clone into.
    var tmp_dir = clone_dir;
    if(!tmp_dir){
        tmp_dir = path.join(os.tmpdir(), 'git', String((new Date()).valueOf()));
    }
    shell.rm('-rf', tmp_dir);
    shell.mkdir('-p', tmp_dir);

    var cloneArgs = ['clone'];
    if(!needsGitCheckout) {
        // only get depth of 1 if there is no branch/commit specified
        cloneArgs.push('--depth=1');
    }
    cloneArgs.push(git_url, tmp_dir);
    return superspawn.spawn('git', cloneArgs)
    .then(function() {
        if (needsGitCheckout){
            return superspawn.spawn('git', ['checkout', git_ref], {
                cwd: tmp_dir
            });
        }
    })
    .then(function(){
        events.emit('log', 'Repository "' + git_url + '" checked out to git ref "' + (git_ref || 'master') + '".');
        return tmp_dir;
    })
    .fail(function (err) {
        shell.rm('-rf', tmp_dir);
        return Q.reject(err);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var tmp_subidr = 'tmp_cordova_git_' + process.pid + '_' + (new Date()).valueOf();
var tmp_dir = path.join(cordova_util.libDirectory, 'tmp', tmp_subidr);
shell.rm('-rf', tmp_dir);
shell.mkdir('-p', tmp_dir);

return Q().then(function () {
  var branchToCheckout = branch || 'master';
  return gitclone.<span class="apidocCodeKeywordSpan">clone</span>(git_url, branchToCheckout, tmp_dir);
}).then(function () {

  return tmp_dir;
}).fail(function (err) {
  shell.rm('-rf', tmp_dir);
  return Q.reject(err);
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.weexpack.gradle" id="apidoc.module.weexpack.gradle">module weexpack.gradle</a></h1>


    <h2>
        <a href="#apidoc.element.weexpack.gradle.applyPatch" id="apidoc.element.weexpack.gradle.applyPatch">
        function <span class="apidocSignatureSpan">weexpack.gradle.</span>applyPatch
        <span class="apidocSignatureSpan">(file, patch, isProject)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function applyPatch(file, patch, isProject) {
  var content = fs.readFileSync(file, 'utf8');

  if(content.match(patch.findPattern || patch.patch)){
    content = content.replace(patch.findPattern || patch.patch, '')
  }

  if(patch.findProjectPattern){
    content = content.replace(patch.findProjectPattern, '')
  }


  if(isProject){
    content = content.replace(patch.pattern, match =&gt; `${match}${patch.projectPatch}`)
  }
  else{
    content = content.replace(patch.pattern, match =&gt; `${match}${patch.patch}`)
  }

  fs.writeFileSync(file, content)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    installPList(dir, projectPath, option.ios.plist||{})
}

if(option.ios&amp;&amp;option.ios.type=="pod"){

  var iosVersion = option.ios&amp;&amp;option.ios.version || version
  const buildPatch = podfile.makeBuildPatch(name, iosVersion);
  podfile.<span class="apidocCodeKeywordSpan">applyPatch</span>(path.join(dir,"Podfile"), buildPatch);
  console.log(name +" install success in ios project")
}
else{
  npmHelper.fetchCache(pluginName, version, function (packageTGZ, packageDir) {
    npmHelper.unpackTgz(packageTGZ, path.join(process.cwd(),"weexplugins",pluginName), function(){
      var targetPath = path.join(process.cwd(), "weexplugins", pluginName);
      const buildPatch = podfile.makeBuildPatch(targetPath, "");
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.gradle.makeBuildPatch" id="apidoc.element.weexpack.gradle.makeBuildPatch">
        function <span class="apidocSignatureSpan">weexpack.gradle.</span>makeBuildPatch
        <span class="apidocSignatureSpan">(name, version, groupId, isProject)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function makeBuildPatch(name, version, groupId, isProject) {
  return {
    pattern: /\t*dependencies {\n/,
    projectPatch:`    compile project(':${name}')\n`,
    patch: `    compile '${groupId}:${name}:${version}'\n`,
    findPattern:new RegExp('\t*compile\\s+\''+groupId+':'+name+'.*\'\\n',"g"),
    findProjectPattern:new RegExp('\t*compile\\s+project\\(\':'+name+'\'\\).*\\n',"g")
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    installPList(dir, projectPath, option.ios.plist||{})
}

if(option.ios&amp;&amp;option.ios.type=="pod"){

  var iosVersion = option.ios&amp;&amp;option.ios.version || version
  const buildPatch = podfile.<span class="apidocCodeKeywordSpan">makeBuildPatch</span>(name, iosVersion);
  podfile.applyPatch(path.join(dir,"Podfile"), buildPatch);
  console.log(name +" install success in ios project")
}
else{
  npmHelper.fetchCache(pluginName, version, function (packageTGZ, packageDir) {
    npmHelper.unpackTgz(packageTGZ, path.join(process.cwd(),"weexplugins",pluginName), function(){
      var targetPath = path.join(process.cwd(), "weexplugins", pluginName);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.gradle.makeSettingsPatch" id="apidoc.element.weexpack.gradle.makeSettingsPatch">
        function <span class="apidocSignatureSpan">weexpack.gradle.</span>makeSettingsPatch
        <span class="apidocSignatureSpan">(name, projectDir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function makeSettingsPatch(name, projectDir) {

<span class="apidocCodeCommentSpan">  /*
   * Fix for Windows
   * Backslashes is the escape character and will result in
   * an invalid path in settings.gradle
   * https://github.com/rnpm/rnpm/issues/113
   */
</span>  if (isWin) {
    projectDir = projectDir.replace(/\\/g, '/');
  }

  return {
    pattern: '\n',
    patch: `include ':${name}'\n` +
    `project(':${name}').projectDir = ` +
    `new File('${projectDir}')\n`,
    findPattern:new RegExp("include ':"+name+"'\\nproject\\(':"+name+"'\\).projectDir = new File\\('"+projectDir+"'\\)\\n","g")
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      console.log(name +" install success in android project")
    }
    else {
npmHelper.fetchCache(pluginName, version, function (packageTGZ, packageDir) {
  npmHelper.unpackTgz(packageTGZ, path.join(process.cwd(),"weexplugins",pluginName), function(){
    var targetPath = path.join(process.cwd(), "weexplugins", pluginName);
    //
    const settingPatch = gradle.<span class="apidocCodeKeywordSpan">makeSettingsPatch</span>(pluginName, targetPath)
    gradle.applyPatch(path.join(dir,"settings.gradle"), settingPatch);

    const buildPatch = gradle.makeBuildPatch(name, version, option.android.groupId||"");
    gradle.applyPatch(path.join(dir,"build.gradle"), buildPatch, true);
    console.log(name +" install success in android project")
  })
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.gradle.revokePatch" id="apidoc.element.weexpack.gradle.revokePatch">
        function <span class="apidocSignatureSpan">weexpack.gradle.</span>revokePatch
        <span class="apidocSignatureSpan">(file, patch)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function revokePatch(file, patch) {

  var content = fs.readFileSync(file, 'utf8');
  var p = content.match(patch.findProjectPattern)

   content = content.replace(patch.findPattern||patch.patch, '').replace(patch.findProjectPattern,'')
  fs.writeFileSync(file,content)

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if(!fs.existsSync(path.join(dir,"Podfile"))){
    console.log("can't find Podfile file");
    return ;
  }
  var name = option.ios&amp;&amp;option.ios.name?option.ios.name:pluginName
  var iosVersion =  option.ios&amp;&amp;option.ios.version || version
  const buildPatch = podfile.makeBuildPatch(name, iosVersion);
  podfile.<span class="apidocCodeKeywordSpan">revokePatch</span>(path.join(dir,"Podfile"), buildPatch);
  console.log(name +" has removed in ios project")
}
else if (utils.isAndroidProject(dir)){
  var name = option.android&amp;&amp;option.android.name?option.android.name:pluginName
  var androidVersion =  option.android&amp;&amp;option.android.version || version
  const buildPatch = gradle.makeBuildPatch(name, androidVersion, option.android.groupId ||"");
  gradle.revokePatch(path.join(dir,"build.gradle"), buildPatch);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.weexpack.market" id="apidoc.module.weexpack.market">module weexpack.market</a></h1>


    <h2>
        <a href="#apidoc.element.weexpack.market.apply" id="apidoc.element.weexpack.market.apply">
        function <span class="apidocSignatureSpan">weexpack.market.</span>apply
        <span class="apidocSignatureSpan">(name, p)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">apply = function (name, p) {
  return new Promise((resolve, reject)=&gt; {
    post(exports.domain + '/json/sync/apply.json?name=' + name + '&amp;p=' + !!p).then(function (res) {
      if (res.success) {
        resolve(res.data);
      }
      else {
        throw new Error('apply plugin fullname error!');
      }

    }).catch(function (e) {
      console.error(chalk.red(`\nMarket apply failed! Please retry ${chalk.blue('weexpack plugin publish')}\n`));
      console.error(chalk.grey('error info:'+e));
    })
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // Remove empty, null or undefined strings from arguments
    for (var property in arguments) {
        var val = arguments[property];
        if (!val || val.length === 0) {
            delete arguments.property;
        }
    }
    insight.track.<span class="apidocCodeKeywordSpan">apply</span>(insight, arguments);
}

function turnOn() {
    insight.optOut = false;
}

function turnOff() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.market.info" id="apidoc.element.weexpack.market.info">
        function <span class="apidocSignatureSpan">weexpack.market.</span>info
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function (name) {
  if (_mapper[name]) {
    return Promise.resolve(_mapper[name]);
  }
  else {
    return new Promise((resolve, reject)=&gt; {
      post(exports.domain + '/json/sync/info.json?name=' + name).then(function (res) {
        if (res.success) {
          _mapper[name] = res.data;
          try {
            Fs.writeFileSync(Path.join(TMP_DIR, CACHE_FILE_NAME), JSON.stringify(_mapper, null, 4))
          } catch (e) {
            console.error('registry map save error');
          }
          resolve(res.data)
        }
        else {
          if (res.data &amp;&amp; res.data.code === '10001') {
            reject('plugin "' + name + '" not found')
          }
          else {
            reject('market error:' + JSON.stringify(res));
          }
        }

      }, function (e) {
        reject(e.toString());
      })
    })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
console.log();
    }
  }

  if (plugin.version &gt; Cache.get('latestVersion', '0.0.0')) {
    let deps = plugin.getDependencies()
    if (deps.length &gt; 0) {
Promise.all(deps.map(d=&gt;Market.<span class="apidocCodeKeywordSpan">info</span>(d.id))).then(function (data) {

  deps = data.map((info)=&gt; {
    return {name: info.name, fullname: info.fullname}
  });
  Cache.deps = deps;
  _publish(plugin, deps, ali)
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.market.publish" id="apidoc.element.weexpack.market.publish">
        function <span class="apidocSignatureSpan">weexpack.market.</span>publish
        <span class="apidocSignatureSpan">(name, namespace, fullname, ali, version, extend)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">publish = function (name, namespace, fullname, ali, version, extend) {
  extend = extend || {}
  return new Promise(function (resolve, reject) {
    let url = exports.domain + '/json/sync/sync.json?name=' + name +  '&amp;fullname=' + fullname + '&amp;p=' + !!ali+(namespace?'&amp;namespace
=' + namespace :'');
    if(extend&amp;&amp;extend.weexpack == "0.4.0"){
      url += "&amp;wpv=4"
    }

    post(url, extend).then(function (res) {
      if (res.success) {
        console.log();
        console.log(chalk.yellow('plugin [' + name + '@' + version + '] publish success! sync to market maybe need a few minutes
.'));
        console.log(chalk.yellow(`you can visit ${exports.domain} see your plugin. if not exist you can retry ${chalk.blue('weexpack
 plugin publish')}`))
        console.log();
        resolve()
      }
      else if (res.data.code == 10004) {
        console.error(chalk.red(`Market sync rejected! Namespace unmatched!`));
      }
    }).catch(function (e) {
      console.error(chalk.red(`Market sync failed! Please retry ${chalk.blue('weexpack plugin publish')}`));
      console.error(chalk.grey('error info:'+e));
    })
  })

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    _publish(plugin, [], ali)
  }


}
else if (Cache.get('nameInfo')) {
  let nameInfo = Cache.get('nameInfo');
  Market.<span class="apidocCodeKeywordSpan">publish</span>(plugin.id, nameInfo.namespace || '', nameInfo.fullname, ali
, plugin.version).then(function () {

  });
}
};
function _publish(plugin, deps, ali) {

var package = {};
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.weexpack.npm" id="apidoc.module.weexpack.npm">module weexpack.npm</a></h1>


    <h2>
        <a href="#apidoc.element.weexpack.npm.fetchCache" id="apidoc.element.weexpack.npm.fetchCache">
        function <span class="apidocSignatureSpan">weexpack.npm.</span>fetchCache
        <span class="apidocSignatureSpan">(npmName, version, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fetchCache = function (npmName, version, callback){

  npm.load(function() {
    npm.commands.cache(['add', (npmName + '@' + version)],  function (error, result) {
      if(error){
        throw  new Error(error)
      }
      else {

        var packageDir = path.resolve(npm.cache, result.name, result.version, 'package');
        var packageTGZ = path.resolve(npm.cache, result.name, result.version, 'package.tgz');
        callback(packageTGZ, packageDir)
      }


    })
  })

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Invokes "npm cache add," and then returns a promise that resolves to a directory containing the downloaded,
 * or cached package.
 * @param packageName - name of an npm package
 * @param packageVersion - requested version (not a version range)
 */
function cachePackage(packageName, packageVersion, callback) {

  utils.<span class="apidocCodeKeywordSpan">fetchCache</span>(packageName, packageVersion, callback)

}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.npm.getLastestVersion" id="apidoc.element.weexpack.npm.getLastestVersion">
        function <span class="apidocSignatureSpan">weexpack.npm.</span>getLastestVersion
        <span class="apidocSignatureSpan">(name, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLastestVersion = function (name, callback){
  var trynum = 0
  npm.load(function() {

    var load = function(npmName){
        npm.commands.info([npmName, "version"], true, function (error, result) {
          if (error&amp;&amp;trynum==0) {
            trynum++
            if(npmName == "weex-gcanvas"){
              var  prefix = "weex-plugin--"
            }
            else {
              var  prefix = "weex-plugin-"
            }
            load(prefix+npmName)
          }
          else if(error&amp;&amp;trynum!==0){
            throw  new Error(error)
          }
          else {
            var version;
            for (var p in result) {
              version = p;
            }
            callback(version)
          }

        })


    }


      load(name);



  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  version = temp[1]
}

var dir = process.cwd();

//get the lastest version
if(!version){
  npmHelper.<span class="apidocCodeKeywordSpan">getLastestVersion</span>(pluginName, function(version){
    utils.isNewVersionPlugin(pluginName, version, function(result){
       if(result){
         handleInstall(dir, pluginName, version,  result)
         if(result.pluginDependencies){
           for(var pn in result.pluginDependencies){
             install(pn, result.pluginDependencies[pn])
           }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.npm.publish" id="apidoc.element.weexpack.npm.publish">
        function <span class="apidocSignatureSpan">weexpack.npm.</span>publish
        <span class="apidocSignatureSpan">(tnpm, verbose, dir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function publish(tnpm, verbose, dir) {
  let pb = new ProgressBar(3000, 'publish', 'uploading...');
  let cmd = tnpm ? 'tnpm' : 'npm';
  return new Promise(function (resolve, reject) {
    let npm = child_process.exec(cmd + ' publish', {cwd: dir || process.cwd()}, function (error, stdout, stderr) {
      pb.complete(function () {
        if (error) {
          console.log();
          let match=stderr.toString().replace(/npm ERR! /g,'').match(/\n\n([\s\w\W]+?)\n\n/);
          if(match&amp;&amp;match[1]){
            console.error(Chalk.red(match[1]))
          }
          else{
            console.error(Chalk.red(stderr.toString()))
          }
          console.log();
         return  resolve(false);
        }
        resolve(true);
      })
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    _publish(plugin, [], ali)
  }


}
else if (Cache.get('nameInfo')) {
  let nameInfo = Cache.get('nameInfo');
  Market.<span class="apidocCodeKeywordSpan">publish</span>(plugin.id, nameInfo.namespace || '', nameInfo.fullname, ali
, plugin.version).then(function () {

  });
}
};
function _publish(plugin, deps, ali) {

var package = {};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.npm.unpackTgz" id="apidoc.element.weexpack.npm.unpackTgz">
        function <span class="apidocSignatureSpan">weexpack.npm.</span>unpackTgz
        <span class="apidocSignatureSpan">(package_tgz, unpackTarget, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unpackTgz = function (package_tgz, unpackTarget, callback) {

    var extractOpts = { type: 'Directory', path: unpackTarget, strip: 1 };

    fs.createReadStream(package_tgz)
        .on('error', function (err) {
          console.warn('Unable to open tarball ' + package_tgz + ': ' + err);
        })
        .pipe(zlib.createUnzip())
        .on('error', function (err) {
          console.warn('Error during unzip for ' + package_tgz + ': ' + err);
        })
        .pipe(tar.Extract(extractOpts))
        .on('error', function(err) {
          console.warn('Error during untar for ' + package_tgz + ': ' + err);

        })
        .on('end', function(result){
          callback(result)
        });

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var iosVersion = option.ios&amp;&amp;option.ios.version || version
  const buildPatch = podfile.makeBuildPatch(name, iosVersion);
  podfile.applyPatch(path.join(dir,"Podfile"), buildPatch);
  console.log(name +" install success in ios project")
}
else{
  npmHelper.fetchCache(pluginName, version, function (packageTGZ, packageDir) {
    npmHelper.<span class="apidocCodeKeywordSpan">unpackTgz</span>(packageTGZ, path.join(process.cwd(),"weexplugins",pluginName
), function(){
      var targetPath = path.join(process.cwd(), "weexplugins", pluginName);
      const buildPatch = podfile.makeBuildPatch(targetPath, "");
      podfile.applyPatch(path.join(dir,"Podfile"), buildPatch);
      console.log(name +" install success in ios project")
    })
  })
}
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.weexpack.podfile" id="apidoc.module.weexpack.podfile">module weexpack.podfile</a></h1>


    <h2>
        <a href="#apidoc.element.weexpack.podfile.applyPatch" id="apidoc.element.weexpack.podfile.applyPatch">
        function <span class="apidocSignatureSpan">weexpack.podfile.</span>applyPatch
        <span class="apidocSignatureSpan">(file, patch)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function applyPatch(file, patch) {
  var content = fs.readFileSync(file, 'utf8');


  if(content.match(patch.findPattern)){
    content = content.replace(patch.findPattern, '')
  }

  content = content.replace(patch.pattern, match =&gt; `${patch.patch}${match}`)

  fs.writeFileSync(file, content)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    installPList(dir, projectPath, option.ios.plist||{})
}

if(option.ios&amp;&amp;option.ios.type=="pod"){

  var iosVersion = option.ios&amp;&amp;option.ios.version || version
  const buildPatch = podfile.makeBuildPatch(name, iosVersion);
  podfile.<span class="apidocCodeKeywordSpan">applyPatch</span>(path.join(dir,"Podfile"), buildPatch);
  console.log(name +" install success in ios project")
}
else{
  npmHelper.fetchCache(pluginName, version, function (packageTGZ, packageDir) {
    npmHelper.unpackTgz(packageTGZ, path.join(process.cwd(),"weexplugins",pluginName), function(){
      var targetPath = path.join(process.cwd(), "weexplugins", pluginName);
      const buildPatch = podfile.makeBuildPatch(targetPath, "");
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.podfile.makeBuildPatch" id="apidoc.element.weexpack.podfile.makeBuildPatch">
        function <span class="apidocSignatureSpan">weexpack.podfile.</span>makeBuildPatch
        <span class="apidocSignatureSpan">(name, version)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function makeBuildPatch(name, version) {
  var patch = ""
  if(version){
    patch = `    pod '${name}', '${version}'\n`

  }
  else {
    patch = `    pod '${name}'\n`
  }

  return {
    pattern: /\t*pod\s+\'\w+\'\s*,?.*\n/,
    patch: patch,
    findPattern:new RegExp('\\t*pod\\s+\''+name+'\'\\s*,?.*\\n',"g")
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    installPList(dir, projectPath, option.ios.plist||{})
}

if(option.ios&amp;&amp;option.ios.type=="pod"){

  var iosVersion = option.ios&amp;&amp;option.ios.version || version
  const buildPatch = podfile.<span class="apidocCodeKeywordSpan">makeBuildPatch</span>(name, iosVersion);
  podfile.applyPatch(path.join(dir,"Podfile"), buildPatch);
  console.log(name +" install success in ios project")
}
else{
  npmHelper.fetchCache(pluginName, version, function (packageTGZ, packageDir) {
    npmHelper.unpackTgz(packageTGZ, path.join(process.cwd(),"weexplugins",pluginName), function(){
      var targetPath = path.join(process.cwd(), "weexplugins", pluginName);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.podfile.revokePatch" id="apidoc.element.weexpack.podfile.revokePatch">
        function <span class="apidocSignatureSpan">weexpack.podfile.</span>revokePatch
        <span class="apidocSignatureSpan">(file, patch)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function revokePatch(file, patch) {
  fs.writeFileSync(file, fs
      .readFileSync(file, 'utf8')
      .replace(patch.findPattern, '')
  );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if(!fs.existsSync(path.join(dir,"Podfile"))){
    console.log("can't find Podfile file");
    return ;
  }
  var name = option.ios&amp;&amp;option.ios.name?option.ios.name:pluginName
  var iosVersion =  option.ios&amp;&amp;option.ios.version || version
  const buildPatch = podfile.makeBuildPatch(name, iosVersion);
  podfile.<span class="apidocCodeKeywordSpan">revokePatch</span>(path.join(dir,"Podfile"), buildPatch);
  console.log(name +" has removed in ios project")
}
else if (utils.isAndroidProject(dir)){
  var name = option.android&amp;&amp;option.android.name?option.android.name:pluginName
  var androidVersion =  option.android&amp;&amp;option.android.version || version
  const buildPatch = gradle.makeBuildPatch(name, androidVersion, option.android.groupId ||"");
  gradle.revokePatch(path.join(dir,"build.gradle"), buildPatch);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.weexpack.project" id="apidoc.module.weexpack.project">module weexpack.project</a></h1>


    <h2>
        <a href="#apidoc.element.weexpack.project.createProject" id="apidoc.element.weexpack.project.createProject">
        function <span class="apidocSignatureSpan">weexpack.project.</span>createProject
        <span class="apidocSignatureSpan">(projectRoot, platform, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createProject = function (projectRoot, platform, opts) {
  var msg;



  opts = opts || {};


  // The "platforms" dir is safe to delete, it's almost equivalent to
  // cordova platform rm &lt;list of all platforms&gt;
  var platformsDir = projectRoot


  return Q().then(function() {
    return downloadProject(projectRoot, platform,  opts);
  }).then(function(dir) {

    var platformPath = path.join(projectRoot, 'Weexplugin');
    var platformAlreadyAdded = fs.existsSync(platformPath);

    if (platformAlreadyAdded) {
      throw new CordovaError('plugin project ' + platform + ' already added.');
      console.log('plugin project ' + platform + ' already added.')
    }

    var tempDir =""
    if(platform == "ios"){
      tempDir = path.join(dir,"bin","templates")
    }
    else {
      tempDir = dir;
    }

    shell.mkdir('-p', platformPath);
    copyProject(tempDir, platformPath)
    if(platform == "ios" &amp;&amp; opts.ali == true){
      changeSource(platformPath)
    }

    events.emit('log', ' ');
    events.emit('log', 'add plugin'  + platform + ' project ...');
    console.log('create weexplugin project  success...')


  });

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.weexpack.telemetry" id="apidoc.module.weexpack.telemetry">module weexpack.telemetry</a></h1>


    <h2>
        <a href="#apidoc.element.weexpack.telemetry.clear" id="apidoc.element.weexpack.telemetry.clear">
        function <span class="apidocSignatureSpan">weexpack.telemetry.</span>clear
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function clear() {
    insight.optOut = undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.telemetry.hasUserOptedInOrOut" id="apidoc.element.weexpack.telemetry.hasUserOptedInOrOut">
        function <span class="apidocSignatureSpan">weexpack.telemetry.</span>hasUserOptedInOrOut
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function hasUserOptedInOrOut() {
    return !(insight.optOut === undefined);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.telemetry.isCI" id="apidoc.element.weexpack.telemetry.isCI">
        function <span class="apidocSignatureSpan">weexpack.telemetry.</span>isCI
        <span class="apidocSignatureSpan">(env)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isCI(env) {
    return !!env.CI;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.telemetry.isNoTelemetryFlag" id="apidoc.element.weexpack.telemetry.isNoTelemetryFlag">
        function <span class="apidocSignatureSpan">weexpack.telemetry.</span>isNoTelemetryFlag
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isNoTelemetryFlag(args) {
    return args.indexOf('--no-telemetry') &gt; -1;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.telemetry.isOptedIn" id="apidoc.element.weexpack.telemetry.isOptedIn">
        function <span class="apidocSignatureSpan">weexpack.telemetry.</span>isOptedIn
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isOptedIn() {
    return !insight.optOut;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.telemetry.showPrompt" id="apidoc.element.weexpack.telemetry.showPrompt">
        function <span class="apidocSignatureSpan">weexpack.telemetry.</span>showPrompt
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function showPrompt() {

    var deferred = Q.defer();

    var msg = "May weexpack anonymously report usage statistics to improve the tool over time?";
    insight.askPermission(msg, function (unused, optIn) {
        var EOL = require('os').EOL;
        if (optIn) {
            console.log(EOL + "Thanks for opting into telemetry to help us improve weexpack.");
            track('telemetry', 'on', 'via-cli-prompt-choice', 'successful');
        } else {
            console.log(EOL + "You have been opted out of telemetry. To change this, run: weexpack telemetry on.");
            // Always track telemetry opt-outs! (whether opted-in or opted-out)
            track('telemetry', 'off', 'via-cli-prompt-choice', 'successful');
        }

        deferred.resolve(optIn);
    });

    return deferred.promise;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.telemetry.track" id="apidoc.element.weexpack.telemetry.track">
        function <span class="apidocSignatureSpan">weexpack.telemetry.</span>track
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function track() {
    // Remove empty, null or undefined strings from arguments
    for (var property in arguments) {
        var val = arguments[property];
        if (!val || val.length === 0) {
            delete arguments.property;
        }
    }
    insight.track.apply(insight, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    shouldCollectTelemetry = collectTelemetry;
    if(isTelemetryCmd) {
        return Q();
    }
    return cli(inputArgs);
}).then(function () {
    if (shouldCollectTelemetry &amp;&amp; !isTelemetryCmd) {
        telemetry.<span class="apidocCodeKeywordSpan">track</span>(cmd, subcommand, 'successful');
    }
    // call cb with error as arg if something failed
    cb(null);
}).fail(function (err) {
    if (shouldCollectTelemetry &amp;&amp; !isTelemetryCmd) {
        telemetry.track(cmd, subcommand, 'unsuccessful');
    }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.telemetry.turnOff" id="apidoc.element.weexpack.telemetry.turnOff">
        function <span class="apidocSignatureSpan">weexpack.telemetry.</span>turnOff
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function turnOff() {
    insight.optOut = true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// turn telemetry on or off
try {
    if (turnOn) {
        telemetry.turnOn();
        console.log("Thanks for opting into telemetry to help us improve weexpack.");
    } else {
        telemetry.<span class="apidocCodeKeywordSpan">turnOff</span>();
        console.log("You have been opted out of telemetry. To change this, run: weexpack telemetry on.");
    }
} catch (ex) {
    cmdSuccess = false;
}

// track or not track ?, that is the question
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.telemetry.turnOn" id="apidoc.element.weexpack.telemetry.turnOn">
        function <span class="apidocSignatureSpan">weexpack.telemetry.</span>turnOn
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function turnOn() {
    insight.optOut = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var turnOn = subcommand === 'on' ? true : false;
var cmdSuccess = true;

// turn telemetry on or off
try {
    if (turnOn) {
        telemetry.<span class="apidocCodeKeywordSpan">turnOn</span>();
        console.log("Thanks for opting into telemetry to help us improve weexpack.");
    } else {
        telemetry.turnOff();
        console.log("You have been opted out of telemetry. To change this, run: weexpack telemetry on.");
    }
} catch (ex) {
    cmdSuccess = false;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.weexpack.validator" id="apidoc.module.weexpack.validator">module weexpack.validator</a></h1>


    <h2>
        <a href="#apidoc.element.weexpack.validator.checkAndroid" id="apidoc.element.weexpack.validator.checkAndroid">
        function <span class="apidocSignatureSpan">weexpack.validator.</span>checkAndroid
        <span class="apidocSignatureSpan">(cwd)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function checkAndroid(cwd) {
  return fs.existsSync(path.join(cwd, 'platforms/android/gradlew'))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * Prepare
 * @param {Object} options
 */
function prepareAndroid({options}) {
  return new Promise((resolve, reject) =&gt; {
const rootPath = process.cwd()

if (!utils.<span class="apidocCodeKeywordSpan">checkAndroid</span>(rootPath)) {
  console.log(rootPath)
  console.log(chalk.red('  Android project not found !'))
  console.log()
  console.log(`  You should run ${chalk.blue('weexpack create')} or ${chalk.blue('weexpack platform add android&amp;#
x27;)}  first`)
  reject()
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.validator.checkIOS" id="apidoc.element.weexpack.validator.checkIOS">
        function <span class="apidocSignatureSpan">weexpack.validator.</span>checkIOS
        <span class="apidocSignatureSpan">(cwd)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function checkIOS(cwd) {
  // return fs.existsSync(path.join(cwd, 'ios/playground'))
  return fs.existsSync(path.join(cwd, 'platforms/ios'))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * Prepare
 * @param {Object} options
 */
function prepareIOS({options}) {
return new Promise((resolve, reject) =&gt; {
  const rootPath = process.cwd()
  if (!utils.<span class="apidocCodeKeywordSpan">checkIOS</span>(rootPath)) {
    console.log()
    console.log(chalk.red('  iOS project not found !'))
    console.log()
    console.log(`  You should run ${chalk.blue('weexpack create')} or ${chalk.blue('weexpack platform add ios'
;)} first`)
    reject()
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.validator.isOnLinux" id="apidoc.element.weexpack.validator.isOnLinux">
        function <span class="apidocSignatureSpan">weexpack.validator.</span>isOnLinux
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isOnLinux() {
  return process.platform === 'linux'
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.validator.isOnMac" id="apidoc.element.weexpack.validator.isOnMac">
        function <span class="apidocSignatureSpan">weexpack.validator.</span>isOnMac
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isOnMac() {
  return process.platform === 'darwin'
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.validator.isOnWindows" id="apidoc.element.weexpack.validator.isOnWindows">
        function <span class="apidocSignatureSpan">weexpack.validator.</span>isOnWindows
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isOnWindows() {
  return /^win/.test(process.platform)
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.weexpack.validator.isValidPackageName" id="apidoc.element.weexpack.validator.isValidPackageName">
        function <span class="apidocSignatureSpan">weexpack.validator.</span>isValidPackageName
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function isValidPackageName(name) {
  return name.match(/^[$A-Z_][0-9A-Z_$]*$/i);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>